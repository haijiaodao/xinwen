!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Splitting=b()}(this,function(){var aj=document,V=aj.createTextNode.bind(aj);function F(b,c,a){b.style.setProperty(c,a)}function I(a,b){return a.appendChild(b)}function ad(c,f,a,d){var b=aj.createElement("span");return f&&(b.className=f),a&&(!d&&b.setAttribute("data-"+f,a),b.textContent=a),c&&I(c,b)||b}function K(a,b){return a.getAttribute("data-"+b)}function X(a,b){return a&&0!=a.length?a.nodeName?[a]:[].slice.call(a[0].nodeName?a:(b||aj).querySelectorAll(a)):[]}function ab(a){for(var b=[];a--;){b[a]=[]}return b}function J(a,b){a&&a.some(b)}function D(a){return function(b){return a[b]}}var q={};function Z(b,d,a,c){return{by:b,depends:d,key:a,split:c}}function G(a){return function b(c,f,g){var d=g.indexOf(c);if(-1==d){g.unshift(c),J(q[c].depends,function(e){b(e,c,g)})}else{var h=g.indexOf(f);g.splice(d,1),g.splice(h,0,c)}return g}(a,0,[]).map(D(q))}function ah(a){q[a.by]=a}function ak(f,h,e,k,g){f.normalize();var d=[],b=document.createDocumentFragment();k&&d.push(f.previousSibling);var j=[];return X(f.childNodes).some(function(c){if(!c.tagName||c.hasChildNodes()){if(c.childNodes&&c.childNodes.length){return j.push(c),void d.push.apply(d,ak(c,h,e,k,g))}var i=c.wholeText||"",a=i.trim();a.length&&(" "===i[0]&&j.push(V(" ")),J(a.split(e),function(m,o){o&&g&&j.push(ad(b,"whitespace"," ",g));var l=ad(b,h,m);d.push(l),j.push(l)})," "===i[i.length-1]&&j.push(V(" ")))}else{j.push(c)}}),J(j,function(a){I(b,a)}),f.innerHTML="",I(f,b),d}var af=0;var Q="words",ae=Z(Q,af,"word",function(a){return ak(a,"word",/\s+/,0,1)}),an="chars",al=Z(an,[Q],"char",function(b,a,d){var c=[];return J(d[Q],function(e,f){c.push.apply(c,ak(e,"char","",a.whitespace&&f))}),c});function B(b){var a=(b=b||{}).key;return X(b.target||"[data-splitting]").map(function(c){var f=c["üçå"];if(!b.force&&f){return f}f=c["üçå"]={el:c};var e=G(b.by||K(c,"splitting")||an),d=function(h,i){for(var g in i){h[g]=i[g]}return h}({},b);return J(e,function(k){if(k.split){var p=k.by,h=(a?"-"+a:"")+k.key,m=k.split(c,d,f);h&&(j=c,g=(l="--"+h)+"-index",J(s=m,function(i,o){Array.isArray(i)?J(i,function(r){F(r,g,o)}):F(i,g,o)}),F(j,l+"-total",s.length)),f[p]=m,c.classList.add(p)}var j,s,l,g}),c.classList.add("splitting"),f})}function aa(c,f,a){var d=X(f.matching||c.children,c),b={};return J(d,function(e){var g=Math.round(e[a]);(b[g]||(b[g]=[])).push(e)}),Object.keys(b).map(Number).sort(am).map(D(b))}function am(a,b){return a-b}B.html=function(a){var b=(a=a||{}).target=ad();return b.innerHTML=a.content,B(a),b.outerHTML},B.add=ah;var ai=Z("lines",[Q],"line",function(b,c,a){return aa(b,{matching:a[Q]},"offsetTop")}),W=Z("items",af,"item",function(a,b){return X(b.matching||a.children,a)}),U=Z("rows",af,"row",function(a,b){return aa(a,b,"offsetTop")}),z=Z("cols",af,"col",function(a,b){return aa(a,b,"offsetLeft")}),E=Z("grid",["rows","cols"]),Y="layout",ag=Z(Y,af,af,function(h,l){var f=l.rows=+(l.rows||K(h,"rows")||1),k=l.columns=+(l.columns||K(h,"columns")||1);if(l.image=l.image||K(h,"image")||h.currentSrc||h.src,l.image){var g=X("img",h)[0];l.image=g&&(g.currentSrc||g.src)}l.image&&F(h,"background-image","url("+l.image+")");for(var m=f*k,j=[],d=ad(af,"cell-grid");m--;){var b=ad(d,"cell");ad(b,"cell-inner"),j.push(b)}return I(h,d),j}),P=Z("cellRows",[Y],"row",function(c,f,a){var d=f.rows,b=ab(d);return J(a[Y],function(h,i,g){b[Math.floor(i/(g.length/d))].push(h)}),b}),ac=Z("cellColumns",[Y],"col",function(c,f,a){var d=f.columns,b=ab(d);return J(a[Y],function(e,g){b[g%d].push(e)}),b}),R=Z("cells",["cellRows","cellColumns"],"cell",function(b,c,a){return a[Y]});return ah(ae),ah(al),ah(ai),ah(W),ah(U),ah(z),ah(E),ah(ag),ah(P),ah(ac),ah(R),B});